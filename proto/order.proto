syntax = "proto3";

package order;

option go_package= "./order";

service OrderService{
  rpc CreateOrder(CreateOrderRequest) returns (CreateOrderResponse);
  rpc GetOrder(GetOrderRequest) returns (GetOrderResponse);
  rpc GetOrders(GetOrdersRequest) returns (GetOrdersResponse);
}

message CreateOrderRequest{
  int64 companyId = 1;
  CreateOrderCustomerRequest customer = 2;
  repeated CreateOrderProductRequest products = 3;
}

message CreateOrderCustomerRequest {
    string firstName = 1;
    optional string lastName = 2;
    string phone = 3;
    string identificationNumber = 4;
    string identificationType = 5;
}

message CreateOrderProductRequest {
    string productId = 1;
    string name = 2;
    uint32 quantity = 3;
    uint64 price = 4;
}

message CreateOrderResponse{
  int64 status = 1;
  string error = 2;
}

message GetOrderRequest {
  string id = 1;
}

message GetOrderResponse {
  Order order = 1;
  Customer customer = 2;
  repeated OrderProduct products = 3;
  int64 status = 4;
  string error = 5;
}

message GetOrdersRequest {
  int64 companyId = 1;
  int32 limit = 2;
  int32 offset = 3;
}

message GetOrdersResponse {
  repeated OrderWithDetails orders = 1;
  int64 total = 2;
  int64 status = 3;
  string error = 4;
}

message Order {
  string id = 1;
  int64 companyId = 2;
  int64 customerId = 3;
  string createdAt = 4;
}

message OrderProduct {
  string id = 1;
  string orderId = 2;
  string productId = 3;
  string name = 4;
  uint32 quantity = 5;
  uint64 price = 6;
}

message Customer {
  int64 id = 1;
  string firstName = 2;
  optional string lastName = 3;
  optional string email = 4;
  optional string phone = 5;
  string identificationNumber = 6;
  string identificationType = 7;
}

message OrderWithDetails {
  Order order = 1;
  Customer customer = 2;
  repeated OrderProduct products = 3;
}
